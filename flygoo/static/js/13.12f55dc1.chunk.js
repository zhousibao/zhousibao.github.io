(this.webpackJsonpflygoo=this.webpackJsonpflygoo||[]).push([[13],{197:function(e,t,n){"use strict";n(36),n(210)},210:function(e,t,n){},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(13),r=n.n(a);function o(e,t,n,a){var o={};if(t&&t.antLocale&&t.antLocale[n])o=t.antLocale[n];else{var c=a();o=c.default||c}var s=r()({},o);return e.locale&&(s=r()({},s,e.locale),e.locale.lang&&(s.lang=r()({},o.lang,e.locale.lang))),s}},223:function(e,t,n){},226:function(e,t,n){e.exports={title:"index_title__3819t"}},281:function(e,t,n){"use strict";n.r(t);n(36),n(223);var a=n(8),r=n.n(a),o=n(10),c=n.n(o),s=n(7),u=n.n(s),l=n(9),i=n.n(l),p=n(11),f=n.n(p),h=n(0),m=n.n(h),d=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.size,a=e.className,r=e.children,o=e.style,c=f()(t,t+"-"+n,a);return h.createElement("div",{className:c,style:o},r)}}]),t}(h.Component),g=d;d.defaultProps={prefixCls:"am-wingblank",size:"lg"};n(111);var b=n(55),v=(n(112),n(82)),k=(n(115),n(72)),y=(n(214),n(219)),C=n(37),x=n.n(C),O=(n(110),n(40)),j=n(198),E=n(79),w=n(27),I=n(28),T=n(30),_=n(29),L=n(76),S=n(226),P=n.n(S),N=n(77);function z(){return Object(N.a)({url:"/api/user/getCode",method:"POST",json:!0})}function J(e){return Object(N.a)({url:"/api/user/login",method:"POST",json:!0,data:e})}var U=n(70),V=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={phone:"15555115232",msgCode:"123456",tip:"\u83b7\u53d6\u9a8c\u8bc1\u7801",canTip:!1},e.onChange=function(t,n){e.setState(Object(E.a)({},t,n))},e.getCode=Object(j.a)(x.a.mark((function t(){var n,a,r,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.phone){t.next=4;break}return O.a.fail("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",2),t.abrupt("return",!1);case 4:if(11===n.length){t.next=7;break}return O.a.fail("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",2),t.abrupt("return",!1);case 7:return t.next=9,z();case 9:a=t.sent,"0"===a.code&&(r=60,o=window.setInterval((function(){r>0?(r--,e.setState({tip:"\u91cd\u65b0\u53d1\u9001".concat(r,"s"),canTip:!0})):(e.setState({tip:"\u83b7\u53d6\u9a8c\u8bc1\u7801",canTip:!1}),window.clearInterval(o))}),1e3));case 12:case"end":return t.stop()}}),t)}))),e.login=Object(j.a)(x.a.mark((function t(){var n,a,r,o,c,s,u,l,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.phone,r=n.msgCode,a){t.next=4;break}return O.a.fail("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",2),t.abrupt("return",!1);case 4:if(11===a.length){t.next=7;break}return O.a.fail("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",2),t.abrupt("return",!1);case 7:if(r){t.next=10;break}return O.a.fail("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",2),t.abrupt("return",!1);case 10:if(6===r.length){t.next=13;break}return O.a.fail("\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801",2),t.abrupt("return",!1);case 13:return o={phone:e.state.phone,code:e.state.msgCode},t.next=16,J(o);case 16:c=t.sent,s=c.code,u=c.data,"0"===s&&(l=u.token,i=u.userInfo,U.a.setItem("token",l),U.a.setItem("userInfo",i),e.props.setToken(l),e.props.setUserInfo(i),O.a.success("\u767b\u5f55\u6210\u529f",1),setTimeout((function(){e.props.history.goBack()}),1e3));case 20:case"end":return t.stop()}}),t)}))),e}return Object(I.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.phone,a=t.msgCode,r=t.tip,o=t.canTip;return m.a.createElement("div",null,m.a.createElement("h1",{className:P.a.title},"\u767b\u5f55"),m.a.createElement(g,null,m.a.createElement(y.a,{type:"number",maxLength:11,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",defaultValue:n,onChange:function(t){return e.onChange("phone",t)}}," \u624b\u673a\u53f7"),m.a.createElement(y.a,{type:"number",maxLength:6,placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",defaultValue:a,onChange:function(t){return e.onChange("msgCode",t)}},"\u9a8c\u8bc1\u7801"),m.a.createElement(k.a,null),m.a.createElement(k.a,null),m.a.createElement(b.a,null,m.a.createElement(b.a.Item,null,m.a.createElement(v.a,{type:"primary",disabled:o,onClick:this.getCode},r)),m.a.createElement(b.a.Item,null,m.a.createElement(v.a,{type:"primary",onClick:this.login},"\u767b\u5f55")))))}}]),n}(m.a.Component);t.default=Object(L.b)((function(e){return e.user}),{setToken:function(e){return{type:"set_token",payload:e}},setUserInfo:function(e){return{type:"set_userInfo",payload:e}}})(V)}}]);